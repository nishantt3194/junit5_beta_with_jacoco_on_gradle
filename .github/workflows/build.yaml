name: Build and Push Docker Image

on: 
  workflow_dispatch:
    inputs:
      version:
        description: 'Image'
        required: true

jobs:
  build-and-push:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

      
    - name: Set executable permissions for Gradle wrapper
      run: |
        chmod +x /home/runner/.gradle/wrapper/dists/gradle-3.0-bin/2z3tfybitalx2py5dr8rf2mti/gradle-3.0/bin/gradle
    

    - name: Install Docker
      run: |
        sudo apt-get update
        sudo curl -fsSL https://get.docker.com -o install-docker.sh
        sudo sh install-docker.sh
    
    - name: Set up Java
      uses: actions/setup-java@v2
      with:
        java-version: '17'  
        distribution: 'adopt'

    
    - name: Build Docker image
      run: |
        ./gradlew bootBuildImage --imageName=configurator-app:latest
      
